name: Docker Image Cascade

on: [push]

jobs:
  runci:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Setup pytest
      run: |
        sudo apt-get install -y python3-setuptools
        pip3 install -U pytest-pythonpath==0.7.1 pytest-cov==2.5.1

    - name: Check Docker Images
      run: |
        docker build -t bicf/bicfbase:1.0.0 -f bicfbase/1.0.0/Dockerfile --rm --no-cache .
        python3 tests/imagecheck.py bicf bicfbase/1.0.0/unittest.yml
